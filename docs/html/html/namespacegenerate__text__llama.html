<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Evolutionary Search for Toxicity in Large Laguage Models using Context-aware Metrics: generate_text_llama Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Evolutionary Search for Toxicity in Large Laguage Models using Context-aware Metrics
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('namespacegenerate__text__llama.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">generate_text_llama Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe1902e7f1bdd09fabfaaa697e3eea0a" id="r_afe1902e7f1bdd09fabfaaa697e3eea0a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe1902e7f1bdd09fabfaaa697e3eea0a">initialize_model</a> (model_name=&quot;meta-llama/Llama-3.2-1B-instruct&quot;)</td></tr>
<tr class="separator:afe1902e7f1bdd09fabfaaa697e3eea0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82f127726c389dea84e8008f18abf5e" id="r_ab82f127726c389dea84e8008f18abf5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab82f127726c389dea84e8008f18abf5e">clean_response</a> (response, prompt)</td></tr>
<tr class="separator:ab82f127726c389dea84e8008f18abf5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03aeb9c47f7200a693eb5cb7a08a634c" id="r_a03aeb9c47f7200a693eb5cb7a08a634c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03aeb9c47f7200a693eb5cb7a08a634c">generate_text</a> (prompt, tokenizer, model)</td></tr>
<tr class="separator:a03aeb9c47f7200a693eb5cb7a08a634c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231106df14ebbce674979d744b4df624" id="r_a231106df14ebbce674979d744b4df624"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a231106df14ebbce674979d744b4df624">save_response</a> (prompt, response, output_file_path)</td></tr>
<tr class="separator:a231106df14ebbce674979d744b4df624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd4ce62a805a2a409743e5dba0dd0cb" id="r_acdd4ce62a805a2a409743e5dba0dd0cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acdd4ce62a805a2a409743e5dba0dd0cb">main</a> ()</td></tr>
<tr class="separator:acdd4ce62a805a2a409743e5dba0dd0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab82f127726c389dea84e8008f18abf5e" name="ab82f127726c389dea84e8008f18abf5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab82f127726c389dea84e8008f18abf5e">&#9670;&#160;</a></span>clean_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">generate_text_llama.clean_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>prompt</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Cleans the response by removing the question part if it repeats.

This function ensures that if the response repeats the question, it is stripped
from the response. It also ensures only the first sentence is returned if the
response contains multiple sentences.

Args:
    response (str): The generated response from the model.
    prompt (str): The original prompt that was given to the model.

Returns:
    str: The cleaned response.
</pre> 
</div>
</div>
<a id="a03aeb9c47f7200a693eb5cb7a08a634c" name="a03aeb9c47f7200a693eb5cb7a08a634c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03aeb9c47f7200a693eb5cb7a08a634c">&#9670;&#160;</a></span>generate_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">generate_text_llama.generate_text </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>prompt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tokenizer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>model</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generates a response from the model based on the given prompt.

This function takes the prompt, tokenizes it, and feeds it into the model for
generating a response. It ensures that the response is cleaned before returning.

Args:
    prompt (str): The input prompt for the model.
    tokenizer: The tokenizer used for tokenizing the input.
    model: The model used to generate the response.

Returns:
    str: The cleaned response generated by the model.
</pre> 
</div>
</div>
<a id="afe1902e7f1bdd09fabfaaa697e3eea0a" name="afe1902e7f1bdd09fabfaaa697e3eea0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe1902e7f1bdd09fabfaaa697e3eea0a">&#9670;&#160;</a></span>initialize_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">generate_text_llama.initialize_model </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>model_name</em></span><span class="paramdefsep"> = </span><span class="paramdefval">&quot;meta-llama/Llama-3.2-1B-instruct&quot;</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initializes the model and tokenizer for the specified model name.

This function loads the pre-trained model and tokenizer from HuggingFace.
If the pad_token is not set in the tokenizer, it defaults to the eos_token.

Args:
    model_name (str): The name of the model to load (default is 'meta-llama/Llama-3.2-1B-instruct').

Returns:
    tokenizer: The tokenizer for the model.
    model: The pre-trained model loaded from HuggingFace.
</pre> 
</div>
</div>
<a id="acdd4ce62a805a2a409743e5dba0dd0cb" name="acdd4ce62a805a2a409743e5dba0dd0cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdd4ce62a805a2a409743e5dba0dd0cb">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">generate_text_llama.main </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Main function to generate toxic responses for multiple questions and save them to a JSON file.

This function initializes the model, generates responses for a list of toxic questions,
and saves the responses to a JSON file. It also ensures that responses are generated in
a single sentence without additional explanations or justifications.
</pre> 
</div>
</div>
<a id="a231106df14ebbce674979d744b4df624" name="a231106df14ebbce674979d744b4df624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231106df14ebbce674979d744b4df624">&#9670;&#160;</a></span>save_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">generate_text_llama.save_response </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>prompt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>response</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>output_file_path</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Saves the generated response to a JSON file.

This function appends the prompt and its corresponding generated response to a JSON file.
If the response is empty, it is skipped.

Args:
    prompt (str): The original prompt that was given to the model.
    response (str): The response generated by the model.
    output_file_path (str): The path where the responses should be saved.
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacegenerate__text__llama.html">generate_text_llama</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
